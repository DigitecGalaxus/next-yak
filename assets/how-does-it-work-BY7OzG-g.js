import{u as s,j as e}from"./index-D3DANtpM.js";const i={title:"How does it work?",description:"undefined"};function l(i){const l={a:"a",code:"code",div:"div",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",span:"span",...s(),...i.components};return e.jsxs(e.Fragment,{children:[e.jsx(l.header,{children:e.jsxs(l.h1,{id:"how-does-it-work",children:["How does it work?",e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#how-does-it-work",children:e.jsx(l.div,{"data-autolink-icon":!0})})]})}),"\n",e.jsxs(l.p,{children:["This is for the curious minds who want to know how ",e.jsx(l.code,{children:"next-yak"})," works under the hood and it's not necessary\nto understand it in order to use it. A live playground to see the code transformation can be found ",e.jsx(l.a,{href:"/playground",children:"here"}),"."]}),"\n",e.jsxs(l.h2,{id:"the-basics",children:["The basics",e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#the-basics",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsxs(l.p,{children:[e.jsx(l.code,{children:"next-yak"})," has 3 parts:"]}),"\n",e.jsxs(l.ol,{children:["\n",e.jsx(l.li,{children:"The compile time part"}),"\n",e.jsx(l.li,{children:"The runtime part"}),"\n",e.jsx(l.li,{children:"Optional: Context"}),"\n"]}),"\n",e.jsx(l.p,{children:"The compile time part is responsible for extracting styles and transforming your code into something that uses\nthe runtime part. The runtime part is responsible for merging styles and props."}),"\n",e.jsxs(l.h2,{id:"the-compile-time-part",children:["The compile time part",e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#the-compile-time-part",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsxs(l.p,{children:[e.jsx(l.code,{children:"next-yak"})," uses two webpack loaders to transform your code. The first loader is responsible for transforming the\nusages of the tagged template literals (like ",e.jsx(l.code,{children:"styled"})," and ",e.jsx(l.code,{children:"css"}),"), the second loader reads the results from the first loader, resolves cross module dependencies and writes the finished css in a css module file."]}),"\n",e.jsxs(l.h3,{id:"the-first-loader-ts-loaderts",children:["The first loader ",e.jsx(l.a,{href:"https://github.com/jantimon/next-yak/blob/main/packages/next-yak/loaders/ts-loader.ts",children:"(ts-loader.ts)"}),e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#the-first-loader-ts-loaderts",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsxs(l.p,{children:["The first loader takes in the source code and transforms the tagged template literals into ",e.jsx(l.code,{children:"next-yak"})," runtime function\ncalls with the imported styles (from the final css module output) as arguments. It also transforms the dynamic parts of the\ntagged template literals into function calls with the properties as argument and adds it as css value to the style object."]}),"\n",e.jsxs(l.h4,{id:"add-style-import",children:["Add style import",e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#add-style-import",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsx(l.p,{children:"The first step of the transformation is to add the import statement for the styles. These styles don't exist yet, but\nwill be generated by the second loader."}),"\n",e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"output","data-lang":"tsx",children:e.jsx(l.code,{children:e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" __styleYak "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "./page.yak.module.css!=!./page?./page.yak.module.css"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]})})}),"\n",e.jsxs(l.p,{children:["This strange looking import string is a poorly documented feature of webpack. It uses the ",e.jsx(l.a,{href:"https://webpack.js.org/api/loaders/#inline-matchresource",children:"Inline matchResource"})," to instrument webpack to use the loaders as if it was a normal ",e.jsx(l.code,{children:".module.css"})," file\nthat points to the current file (",e.jsx(l.code,{children:"./page"}),"). In order that this import statement works in next.js, we need to add\na query parameter that ends with ",e.jsx(l.code,{children:".module.css"}),", as this is the way next.js recognizes CSS modules."]}),"\n",e.jsxs(l.p,{children:["So that means ",e.jsx(l.code,{children:"./page.yak.module.css"})," is a virtual file that is generated by the second loader and contains the\nstyles of the current file. ",e.jsx(l.code,{children:"./page.yak.module.css!=!./page"})," says that the second loader (matching ",e.jsx(l.code,{children:".yak.module.css"})," files) should\nbe used with the current file as input. Lastly ",e.jsx(l.code,{children:"?./page.yak.module.css"})," is the query parameter that tells next.js that this\nis a CSS module and it's loaders should be used."]}),"\n",e.jsxs(l.h4,{id:"transform-tagged-template-literals",children:["Transform tagged template literals",e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#transform-tagged-template-literals",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsxs(l.p,{children:["As the next step, the tagged template literals are transformed into ",e.jsx(l.code,{children:"next-yak"}),' runtime function calls. The static\nCSS parts are passed as references to the class names from the "not yet generated" css module file.']}),"\n",e.jsxs(l.div,{className:"code-group",children:[e.jsx(l.div,{"data-title":"input",children:e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"input","data-lang":"tsx",children:e.jsxs(l.code,{children:[e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { styled } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "next-yak"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" Button"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" styled."}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"button"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"`"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"  font-size: 2rem;"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"  font-weight: bold;"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"  color: blue;"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"  &:hover {"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"    color: red;"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"  }"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"`"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]})]})})}),e.jsx(l.div,{"data-title":"output",children:e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed has-focused",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"output","data-lang":"tsx",children:e.jsxs(l.code,{children:[e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { styled } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "next-yak"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" __styleYak "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "./page.yak.module.css!=!./page?./page.yak.module.css"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsxs(l.span,{className:"line focused",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" Button"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" styled."}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"button"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(__styleYak.Button); "})]})]})})})]}),"\n",e.jsx(l.p,{children:"The dynamic parts are preserved and apply the classes or CSS variables at runtime. There are two different types\nof dynamic parts: The first type is the dynamic CSS property value (color in the following example) and the second type is the dynamic CSS property itself (background in the following example)."}),"\n",e.jsx(l.p,{children:"The property value is transformed into a CSS variable and set on the element itself directly based on the functions return value."}),"\n",e.jsx(l.p,{children:"The property itself is transformed into a class name that is referenced during runtime when the function returns them."}),"\n",e.jsxs(l.div,{className:"code-group",children:[e.jsx(l.div,{"data-title":"input",children:e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed has-focused",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"input","data-lang":"tsx",children:e.jsxs(l.code,{children:[e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { styled, css } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "next-yak"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" Button"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" styled."}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"button"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"`"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"\tfont-size: 2rem;"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"\tfont-weight: bold;"})}),"\n",e.jsxs(l.span,{className:"line focused",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"\tcolor: ${"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"props"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" props"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"."}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"$primary"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ?"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "white"'}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" :"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "blue"};'})]}),"\n",e.jsxs(l.span,{className:"line focused",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"\t${"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"props"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" props"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"."}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"$primary"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ?"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" css"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"`background: black;`"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" :"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" css"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"`background: white;`}"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"    &:hover {"})}),"\n",e.jsxs(l.span,{className:"line focused",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"\t\tcolor: ${"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:"props"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" props"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"."}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"$primary"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ?"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "red"'}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" :"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "blue"};'})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"\t}"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"`"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]})]})})}),e.jsx(l.div,{"data-title":"output",children:e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed has-focused",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"output","data-lang":"tsx",children:e.jsxs(l.code,{children:[e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { styled, css } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "next-yak"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" __styleYak "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "./page.yak.module.css!=!./page?./page.yak.module.css"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" Button"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" styled."}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"button"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"\t__styleYak.Button, "})}),"\n",e.jsxs(l.span,{className:"line focused",children:[e.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:"\tprops"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" props.$primary "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"?"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" css"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(__styleYak.propsprimary_0) "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" css"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(__styleYak.not_propsprimary_1), "})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"\t{"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'      "style"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": {"})]}),"\n",e.jsxs(l.span,{className:"line focused",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'        "--'}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:"\\uD83E\\uDDAC"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'18fi82j0"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:"props"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" props.$primary "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"?"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "white"'}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" :"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "blue"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:", "})]}),"\n",e.jsxs(l.span,{className:"line focused",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'        "--'}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#F47067"},children:"\\uD83E\\uDDAC"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'18fi82j1"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:"props"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" props.$primary "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"?"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "red"'}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" :"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "blue"'})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"      }"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"});"})})]})})})]}),"\n",e.jsxs(l.h3,{id:"the-second-loader-css-loaderts",children:["The second loader ",e.jsx(l.a,{href:"https://github.com/jantimon/next-yak/blob/main/packages/next-yak/loaders/ts-post-loader.ts",children:"(css-loader.ts)"}),e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#the-second-loader-css-loaderts",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsx(l.p,{children:"The second loader takes the output of the first loader and resolves the cross module dependencies. The result is valid CSS that will be written to the context."}),"\n",e.jsxs(l.h4,{id:"resolve-cross-module-dependencies",children:["Resolve cross module dependencies",e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#resolve-cross-module-dependencies",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsx(l.p,{children:"To resolve cross module dependencies, the first loader generates a unique string to signal the second loader that this is a dependency with a specific name. The second loader then reads the generated CSS from the first loader and resolves the dependencies.\nOnce the final css is generated the loader hands it over as a CSS module file so it can be processed by Next.js like a normal CSS module file."}),"\n",e.jsxs(l.h2,{id:"the-runtime-part",children:["The runtime part",e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#the-runtime-part",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsx(l.p,{children:"The runtime part is responsible for merging styles and props. It's a simple function that takes in the styles and the props and returns the merged styles."}),"\n",e.jsxs(l.p,{children:["See: ",e.jsx(l.a,{href:"https://github.com/jantimon/next-yak/blob/main/packages/next-yak/runtime/styled.tsx",children:"Styled function"})]}),"\n",e.jsx(l.p,{children:"A lot of this code is types and comments to indicate why certain things are done. The actual runtime code is very small."}),"\n",e.jsxs(l.h2,{id:"context",children:["Context",e.jsx(l.a,{"aria-hidden":"true",tabIndex:"-1",href:"#context",children:e.jsx(l.div,{"data-autolink-icon":!0})})]}),"\n",e.jsx(l.p,{children:"The yak theme context allows you to configure the theme of your yak application. It works for react-server components\nand normal react components."}),"\n",e.jsx(l.p,{children:"The first part of the puzzle is to export two different modules for the server and the client."}),"\n",e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0",children:e.jsxs(l.code,{children:[e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"./context"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:'\t"react-server"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:'\t\t"import"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"./dist/context/index.server.js"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:'\t\t"require"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"./dist/context/index.server.cjs"'})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"\t},"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:'\t"default"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:'\t\t"import"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"./dist/context/index.js"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:","})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:'\t\t"require"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:": "}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"./dist/context/index.cjs"'})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"\t}"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})}),"\n",e.jsx(l.p,{children:"For the client components, we use the default context from react."}),"\n",e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"client: index.tsx","data-lang":"tsx",children:e.jsxs(l.code,{children:[e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"use client"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"//"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// This file is the client component (browser & ssr) version of index.server.tsx"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"//"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" React, { ReactNode, createContext, useContext } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "react"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"export"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" interface"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" YakTheme"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {}"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/**"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * The yak theme context"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@see"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" https://github.com/jantimon/next-yak/blob/main/packages/next-yak/runtime/context/README.md"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" */"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" YakContext"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" createContext"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"<"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:"YakTheme"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:">({});"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/**"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * Returns the current yak theme context"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" *"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@see"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" https://github.com/jantimon/next-yak/blob/main/packages/next-yak/runtime/context/README.md"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" */"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"export"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" const"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" useTheme"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ()"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" YakTheme"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" =>"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" useContext"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(YakContext);"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"/**"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * Yak theme context provider"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" *"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" * "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"@see"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" https://github.com/jantimon/next-yak/blob/main/packages/next-yak/runtime/context/README.md"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:" */"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"export"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" const"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" YakThemeProvider"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ({"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  children,"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  theme "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {},"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:"  children"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" ReactNode"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:"  theme"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"?:"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" YakTheme"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}) "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"=>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" <"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:"YakContext.Provider"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#6CB6FF"},children:" value"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#F47067"},children:"{"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"theme"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#F47067"},children:"}"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:">"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#F47067"},children:"{"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"children"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#F47067"},children:"}"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"</"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:"YakContext.Provider"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:">;"})]})]})}),"\n",e.jsxs(l.p,{children:["For the server components, we use a module that exports exactly the same API as the one for client components, but with a different implementation where we use the ",e.jsx(l.code,{children:"cache"})," function from react to cache the result of the context."]}),"\n",e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"server: index.server.tsx","data-lang":"tsx",children:e.jsxs(l.code,{children:[e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"//"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// This file is the react-server component version of index.tsx"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"//"})}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:'// @ts-ignore - in the current @types/react "cache" is not typed'})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" React, { ReactNode, cache } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "react"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { YakThemeProvider "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"as"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" YakThemeClientProvider } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "./index.js"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// the following import might be changed by"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// the user config in withYak to point to their own"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// context"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { getYakThemeContext } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "next-yak/context/baseContext"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"export"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" useTheme"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" cache"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(() "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"=>"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getYakThemeContext"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"());"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"export"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" const"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" YakThemeProvider"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ({ "}),e.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:"children"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" }"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { "}),e.jsx(l.span,{style:{color:"#E36209","--shiki-dark":"#F69D50"},children:"children"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:":"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" ReactNode"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" }) "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"=>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"  return"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" ("})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    <"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:"YakThemeClientProvider"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#6CB6FF"},children:" theme"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#F47067"},children:"{"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"useTheme"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"()"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#F47067"},children:"}"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:">"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#F47067"},children:"      {"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"children"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#F47067"},children:"}"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    </"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#8DDB8C"},children:"YakThemeClientProvider"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:">"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"  );"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"};"})})]})}),"\n",e.jsxs(l.p,{children:["The ",e.jsx(l.code,{children:"getYakThemeContext"})," function is imported from the user's ",e.jsx(l.code,{children:"yak.context.ts"})," file. This file is a regular typescript file that exports a function that returns the theme context. You can use every api that works with server components like ",e.jsx(l.a,{href:"https://nextjs.org/docs/app/api-reference/functions/headers",children:"headers"})," or ",e.jsx(l.a,{href:"https://nextjs.org/docs/app/api-reference/functions/cookies",children:"cookies"})," and use them\nto determine your values for the theme context."]}),"\n",e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"yak.context.ts","data-lang":"tsx",children:e.jsxs(l.code,{children:[e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { cookies } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:" 'next/headers'"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"import"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" { cache } "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"from"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "react"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:";"})]}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" hasHighContrast"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" cache"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(() "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"=>"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" cookieStore"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" cookies"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"()"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    return"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" cookieStore."}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"get"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"("}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:'"highContrast"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:")?.value "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"==="}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "true"'})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"});"})}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"export"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" function"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" getYakThemeContext"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"() {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    return"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"        highContrast: "}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:"hasHighContrast"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"()"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"    }"})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})}),"\n",e.jsx(l.span,{className:"line","data-empty-line":!0,children:" "}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"declare"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" module"}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:' "next-yak"'}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"    export"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" interface"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#F69D50"},children:" YakTheme"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" extends"}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#6CB6FF"},children:" ReturnType"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"<"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"typeof"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" getYakThemeContext> { }"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})}),"\n",e.jsxs(l.p,{children:["The second part of the puzzle is that the ",e.jsx(l.code,{children:"withYak"})," function changes to what file webpack resolves the context so that\nit points to the individual ",e.jsx(l.code,{children:"yak.context.ts"})," file in the root directory."]}),"\n",e.jsx(l.pre,{className:"shiki shiki-themes github-light github-dark-dimmed",style:{backgroundColor:"#fff","--shiki-dark-bg":"#22272e",color:"#24292e","--shiki-dark":"#adbac7"},tabIndex:"0","data-title":"withYak/index.ts","data-lang":"ts",children:e.jsxs(l.code,{children:[e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// With the following alias the internal next-yak code "})}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#6A737D","--shiki-dark":"#768390"},children:"// is able to import a context which works for server components"})}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"const"}),e.jsx(l.span,{style:{color:"#005CC5","--shiki-dark":"#6CB6FF"},children:" yakContext"}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:" ="}),e.jsx(l.span,{style:{color:"#6F42C1","--shiki-dark":"#DCBDFB"},children:" resolveYakContext"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"(yakOptions.contextPath, webpackConfig.context);"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"if"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" (yakContext) {"})]}),"\n",e.jsxs(l.span,{className:"line",children:[e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"\twebpackConfig.resolve.alias["}),e.jsx(l.span,{style:{color:"#032F62","--shiki-dark":"#96D0FF"},children:"'next-yak/context/baseContext'"}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"] "}),e.jsx(l.span,{style:{color:"#D73A49","--shiki-dark":"#F47067"},children:"="}),e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:" yakContext;"})]}),"\n",e.jsx(l.span,{className:"line",children:e.jsx(l.span,{style:{color:"#24292E","--shiki-dark":"#ADBAC7"},children:"}"})})]})})]})}function r(i={}){const{wrapper:r}={...s(),...i.components};return r?e.jsx(r,{...i,children:e.jsx(l,{...i})}):l(i)}export{r as default,i as frontmatter};
