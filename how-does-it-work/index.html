<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/initializeTheme.iife.js"></script>
    
    <title data-react-helmet="true">How does it work? â€“ Next-Yak</title>
    <meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="How does it work?"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/>
    <link data-react-helmet="true" rel="icon" href="/yak-icon-light.svg" type="image/svg+xml"/>
    
    
    
  
    <script type="module" crossorigin src="/assets/index-B2fKK7ki.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/style-CUHw6iXE.css">
  </head>
  <body>
    <div id="app"><div class="vocs_DocsLayout" data-layout="docs"><a class="vocs_SkipLink vocs_utils_visuallyHidden" href="/how-does-it-work#vocs-content">Skip to content</a><div class="vocs_DocsLayout_gutterLeft"><aside class="vocs_Sidebar vocs_DocsLayout_sidebar"><div class="vocs_Sidebar_logoWrapper"><div class="vocs_Sidebar_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/yak-icon-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/yak-icon-light.svg"/></a></div><div class="vocs_Sidebar_divider"></div></div><nav class="vocs_Sidebar_navigation"><div class="vocs_Sidebar_group"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/getting-started">Getting Started</a><a data-active="false" class="vocs_Sidebar_item" href="/why-next-yak">Why next-yak?</a><a data-active="false" class="vocs_Sidebar_item" href="/features">Features</a><a data-active="false" class="vocs_Sidebar_item" href="/migration-from-styled-components">Migration from styled-components</a><a data-active="true" class="vocs_Sidebar_item" href="/how-does-it-work">How does it work?</a><a data-active="false" class="vocs_Sidebar_item" href="/faq">FAQ</a><a data-active="false" class="vocs_Sidebar_item" href="/examples">Examples</a><a data-active="false" class="vocs_Sidebar_item" href="/roadmap">Roadmap</a></div></section></div></nav></aside></div><div class="vocs_DocsLayout_gutterTop vocs_DocsLayout_gutterTop_offsetLeftGutter"><div class="vocs_DesktopTopNav"><button class="vocs_DesktopSearch_search" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rlj:" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top:2px"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Search<div class="vocs_DesktopSearch_searchCommand"><div style="background:currentColor;transform:rotate(45deg);width:1.5px;border-radius:2px;height:100%"></div></div></button><div class="vocs_DesktopTopNav_logoWrapper"><div class="vocs_DesktopTopNav_logo"><a style="align-items:center;display:flex;height:56px;margin-top:4px" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/yak-icon-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/yak-icon-light.svg"/></a></div></div><div class="vocs_DesktopTopNav_section"></div><div class="vocs_DesktopTopNav_section"><div class="vocs_DesktopTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/getting-started" variant="styleless" data-radix-collection-item="">Documentation</a><a data-active="false" class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/playground" variant="styleless" data-radix-collection-item="">Playground</a><a class="vocs_DesktopTopNav_item vocs_NavigationMenu_link vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://github.com/jantimon/next-yak" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" data-active="false" variant="styleless" data-radix-collection-item="">GitHub</a></ul></div></nav></div><div class="vocs_DesktopTopNav_divider"></div><div class="vocs_DesktopTopNav_group vocs_DesktopTopNav_hideCompact" style="margin-left:-8px;margin-right:-8px"><div class="vocs_DesktopTopNav_item"><button class="vocs_DesktopTopNav_button" type="button"><div aria-label="Light" class="vocs_Icon vocs_DesktopTopNav_icon vocs_utils_visibleDark" role="img" style="--vocs_Icon_size:20px"><svg width="100%" height="100%" viewBox="0 0 84 84" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Sun</title><path d="M41.8675 15.5254C43.9183 15.5254 45.6273 13.7676 45.6273 11.7168V3.80658C45.6273 1.75588 43.9183 0.046875 41.8675 0.046875C39.7679 0.046875 38.0589 1.75588 38.0589 3.80658V11.7168C38.0589 13.7676 39.7679 15.5254 41.8675 15.5254ZM60.3246 23.2402C61.7895 24.7051 64.2309 24.7539 65.7446 23.2402L71.3598 17.6738C72.7758 16.209 72.7758 13.7188 71.3598 12.2539C69.8949 10.7891 67.4535 10.7891 65.9887 12.2539L60.3246 17.918C58.9086 19.3828 58.9086 21.7754 60.3246 23.2402ZM67.9906 41.7461C67.9906 43.7969 69.7485 45.5547 71.7992 45.5547H79.6117C81.7113 45.5547 83.4202 43.7969 83.4202 41.7461C83.4202 39.6953 81.7113 37.9375 79.6117 37.9375H71.7992C69.7485 37.9375 67.9906 39.6953 67.9906 41.7461ZM60.3246 60.3008C58.9086 61.7656 58.9086 64.1582 60.3246 65.623L65.9887 71.2871C67.4535 72.7519 69.8949 72.7031 71.3598 71.2383C72.7758 69.7734 72.7758 67.332 71.3598 65.8672L65.6957 60.3008C64.2309 58.8359 61.7895 58.8359 60.3246 60.3008ZM41.8675 67.9668C39.7679 67.9668 38.0589 69.7246 38.0589 71.7754V79.6855C38.0589 81.7363 39.7679 83.4453 41.8675 83.4453C43.9183 83.4453 45.6273 81.7363 45.6273 79.6855V71.7754C45.6273 69.7246 43.9183 67.9668 41.8675 67.9668ZM23.3617 60.3008C21.8969 58.8359 19.4067 58.8359 17.9418 60.3008L12.3754 65.8184C10.9106 67.2832 10.9106 69.7246 12.3266 71.1894C13.7914 72.6543 16.2328 72.7031 17.6977 71.2383L23.3129 65.623C24.7778 64.1582 24.7778 61.7656 23.3617 60.3008ZM15.6957 41.7461C15.6957 39.6953 13.9867 37.9375 11.8871 37.9375H4.07455C1.97497 37.9375 0.265991 39.6953 0.265991 41.7461C0.265991 43.7969 1.97497 45.5547 4.07455 45.5547H11.8871C13.9867 45.5547 15.6957 43.7969 15.6957 41.7461ZM23.3129 23.2402C24.7778 21.8242 24.7778 19.334 23.3617 17.918L17.7465 12.2539C16.3305 10.8379 13.8403 10.7891 12.4242 12.2539C10.9594 13.7188 10.9594 16.209 12.3754 17.625L17.9418 23.2402C19.4067 24.7051 21.8481 24.7051 23.3129 23.2402Z" fill="currentColor"></path><path d="M41.8675 61.668C52.7073 61.668 61.7405 52.6836 61.7405 41.7461C61.7405 30.8086 52.7073 21.8242 41.8675 21.8242C30.9788 21.8242 21.9456 30.8086 21.9456 41.7461C21.9456 52.6836 30.9788 61.668 41.8675 61.668ZM41.8675 55.0273C34.5921 55.0273 28.5862 48.9727 28.5862 41.7461C28.5862 34.5195 34.5921 28.4648 41.8675 28.4648C49.0941 28.4648 55.0999 34.5195 55.0999 41.7461C55.0999 48.9727 49.0941 55.0273 41.8675 55.0273Z" fill="currentColor"></path></svg></div><div aria-label="Dark" class="vocs_Icon vocs_DesktopTopNav_icon vocs_utils_visibleLight" role="img" style="margin-top:-2px;--vocs_Icon_size:20px"><svg width="100%" height="100%" viewBox="0 0 78 82" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Moon</title><path d="M62.8455 45.9668C63.6268 45.9668 64.2127 45.3809 64.3104 44.5508C65.4334 34.3457 66.0682 33.9551 76.4197 32.3438C77.3963 32.1973 77.9334 31.7578 77.9334 30.8789C77.9334 30.0977 77.3963 29.5605 76.6151 29.4629C66.1658 27.4609 65.4334 27.4609 64.3104 17.2559C64.2127 16.377 63.6268 15.8398 62.8455 15.8398C62.0154 15.8398 61.4783 16.377 61.3807 17.207C60.1111 27.6074 59.6229 28.0957 49.0272 29.4629C48.2947 29.5117 47.7088 30.0977 47.7088 30.8789C47.7088 31.709 48.2947 32.1973 49.0272 32.3438C59.6229 34.3457 60.0623 34.4434 61.3807 44.6484C61.4783 45.3809 62.0154 45.9668 62.8455 45.9668ZM44.535 19.5508C45.0233 19.5508 45.3162 19.2578 45.4139 18.7695C46.6834 12.4707 46.5369 12.373 53.1287 11.0547C53.5682 10.957 53.91 10.7129 53.91 10.1758C53.91 9.63868 53.5682 9.39448 53.1287 9.29688C46.5369 7.97848 46.6834 7.88089 45.4139 1.58199C45.3162 1.09379 45.0233 0.800781 44.535 0.800781C43.9979 0.800781 43.7049 1.09379 43.6072 1.58199C42.3377 7.88089 42.4842 7.97848 35.9412 9.29688C35.4529 9.39448 35.1111 9.63868 35.1111 10.1758C35.1111 10.7129 35.4529 10.957 35.9412 11.0547C42.4842 12.373 42.3865 12.4707 43.6072 18.7695C43.7049 19.2578 43.9979 19.5508 44.535 19.5508Z" fill="currentColor"></path><path d="M34.3298 81.2696C48.49 81.2696 59.9157 74.043 65.0915 61.7872C65.8239 59.9806 65.5798 58.6134 64.7497 57.7833C64.0173 57.0509 62.7478 56.9044 61.3318 57.4903C58.4509 58.6134 54.9353 59.2481 50.6384 59.2481C33.695 59.2481 22.7575 48.6036 22.7575 32.2462C22.7575 27.4122 23.6853 22.6759 24.7595 20.5763C25.5407 18.9161 25.4919 17.5001 24.8083 16.67C24.0271 15.7423 22.6599 15.4005 20.7068 16.1329C8.64624 20.7716 0.345459 33.4181 0.345459 47.8712C0.345459 66.8165 14.5056 81.2696 34.3298 81.2696ZM34.4275 74.5801C18.4607 74.5801 7.03494 62.9591 7.03494 47.3341C7.03494 38.2521 10.9411 30.0489 17.6306 24.629C16.8005 27.0704 16.361 30.6837 16.361 34.1505C16.361 52.8517 29.5446 65.6935 48.8806 65.6935C52.0544 65.6935 54.9841 65.3517 56.4001 64.9122C51.615 70.918 43.4607 74.5801 34.4275 74.5801Z" fill="currentColor"></path></svg></div></button></div></div></div></div><div class="vocs_MobileTopNav"><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group"><div class="vocs_MobileTopNav_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/yak-icon-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/yak-icon-light.svg"/></a></div></div><div class="vocs_MobileTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_MobileTopNav_navigation vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/getting-started" variant="styleless" data-radix-collection-item="">Documentation</a><a data-active="false" class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless" href="/playground" variant="styleless" data-radix-collection-item="">Playground</a><a class="vocs_NavigationMenu_link vocs_Link vocs_Link_styleless vocs_ExternalLink" href="https://github.com/jantimon/next-yak" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)" data-active="false" variant="styleless" data-radix-collection-item="">GitHub</a></ul></div></nav><div class="vocs_MobileTopNav_navigation vocs_MobileTopNav_navigation_compact"><a class="vocs_MobileTopNav_navigationItem vocs_Link vocs_Link_styleless" href="/getting-started" variant="styleless">Documentation</a></div></div></div><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group" style="margin-right:-8px"><button class="vocs_MobileSearch_searchButton" type="button" aria-label="Search" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R39j:" data-state="closed"><svg width="21" height="21" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div><div class="vocs_DocsLayout_gutterTopCurtain vocs_DocsLayout_gutterTopCurtain_withSidebar"><div class="vocs_DesktopTopNav_curtain"></div><div class="vocs_MobileTopNav_curtain"><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rqj:" data-state="closed" class="vocs_MobileTopNav_menuTrigger"><div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:13px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79 48" fill="none"><title>Menu</title><path fill="currentColor" d="M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"></path></svg></div><div class="vocs_MobileTopNav_menuTitle">How does it work?</div></button></div></div><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R5aj:" data-state="closed" class="vocs_MobileTopNav_outlineTrigger">On this page<div aria-label="On this page" class="vocs_Icon" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></button></div></div></div></div><div class="vocs_DocsLayout_gutterRight vocs_DocsLayout_gutterRight_withSidebar"></div><div id="vocs-content" class="vocs_DocsLayout_content vocs_DocsLayout_content_withSidebar vocs_DocsLayout_content_withTopNav"><article class="vocs_Content"><header class="vocs_Header"><h1 class="vocs_H1 vocs_Heading"><div id="how-does-it-work" class="vocs_Heading_slugTarget"></div>How does it work?<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#how-does-it-work"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h1></header>
<p class="vocs_Paragraph">This is for the curious minds who want to know how <code class="vocs_Code">next-yak</code> works under the hood and it&#x27;s not necessary
to understand it in order to use it. A live playground to see the code transformation can be found <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/playground">here</a>.</p>
<h2 class="vocs_H2 vocs_Heading"><div id="the-basics" class="vocs_Heading_slugTarget"></div>The basics<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#the-basics"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph"><code class="vocs_Code">next-yak</code> has 3 parts:</p>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem">The compile time part</li>
<li class="vocs_ListItem">The runtime part</li>
<li class="vocs_ListItem">Optional: Context</li>
</ol>
<p class="vocs_Paragraph">The compile time part is responsible for extracting styles and transforming your code into something that uses
the runtime part. The runtime part is responsible for merging styles and props.</p>
<h2 class="vocs_H2 vocs_Heading"><div id="the-compile-time-part" class="vocs_Heading_slugTarget"></div>The compile time part<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#the-compile-time-part"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph"><code class="vocs_Code">next-yak</code> uses two webpack loaders to transform your code. The first loader is responsible for transforming the
usages of the tagged template literals (like <code class="vocs_Code">styled</code> and <code class="vocs_Code">css</code>), the second loader reads the results from the first loader, resolves cross module dependencies and writes the finished css in a css module file.</p>
<h3 class="vocs_H3 vocs_Heading"><div id="the-first-loader-ts-loaderts" class="vocs_Heading_slugTarget"></div>The first loader <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/jantimon/next-yak/blob/main/packages/next-yak/loaders/ts-loader.ts" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">(ts-loader.ts)</a><a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#the-first-loader-ts-loaderts"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">The first loader takes in the source code and transforms the tagged template literals into <code class="vocs_Code">next-yak</code> runtime function
calls with the imported styles (from the final css module output) as arguments. It also transforms the dynamic parts of the
tagged template literals into function calls with the properties as argument and adds it as css value to the style object.</p>
<h4 class="vocs_H4 vocs_Heading"><div id="add-style-import" class="vocs_Heading_slugTarget"></div>Add style import<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#add-style-import"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">The first step of the transformation is to add the import statement for the styles. These styles don&#x27;t exist yet, but
will be generated by the second loader.</p>
<div class="vocs_CodeBlock"><div class="vocs_CodeTitle">output</div><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" data-title="output" data-lang="tsx" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> __styleYak </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;./page.yak.module.css!=!./page?./page.yak.module.css&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span></code></pre></div></div>
<p class="vocs_Paragraph">This strange looking import string is a poorly documented feature of webpack. It uses the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://webpack.js.org/api/loaders/#inline-matchresource" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Inline matchResource</a> to instrument webpack to use the loaders as if it was a normal <code class="vocs_Code">.module.css</code> file
that points to the current file (<code class="vocs_Code">./page</code>). In order that this import statement works in next.js, we need to add
a query parameter that ends with <code class="vocs_Code">.module.css</code>, as this is the way next.js recognizes CSS modules.</p>
<p class="vocs_Paragraph">So that means <code class="vocs_Code">./page.yak.module.css</code> is a virtual file that is generated by the second loader and contains the
styles of the current file. <code class="vocs_Code">./page.yak.module.css!=!./page</code> says that the second loader (matching <code class="vocs_Code">.yak.module.css</code> files) should
be used with the current file as input. Lastly <code class="vocs_Code">?./page.yak.module.css</code> is the query parameter that tells next.js that this
is a CSS module and it&#x27;s loaders should be used.</p>
<h4 class="vocs_H4 vocs_Heading"><div id="transform-tagged-template-literals" class="vocs_Heading_slugTarget"></div>Transform tagged template literals<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#transform-tagged-template-literals"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">As the next step, the tagged template literals are transformed into <code class="vocs_Code">next-yak</code> runtime function calls. The static
CSS parts are passed as references to the class names from the &quot;not yet generated&quot; css module file.</p>
<div dir="ltr" data-orientation="horizontal" class="vocs_CodeGroup vocs_Tabs"><div role="tablist" aria-orientation="horizontal" aria-label="Code group" class="vocs_Tabs_list" tabindex="-1" data-orientation="horizontal" style="outline:none"><button type="button" role="tab" aria-selected="true" aria-controls="radix-:R4dr:-content-input" data-state="active" id="radix-:R4dr:-trigger-input" class="vocs_Tabs_trigger" tabindex="-1" data-orientation="horizontal" data-radix-collection-item="">input</button><button type="button" role="tab" aria-selected="false" aria-controls="radix-:R4dr:-content-output" data-state="inactive" id="radix-:R4dr:-trigger-output" class="vocs_Tabs_trigger" tabindex="-1" data-orientation="horizontal" data-radix-collection-item="">output</button></div><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:R4dr:-trigger-input" id="radix-:R4dr:-content-input" tabindex="0" data-shiki="true" class="vocs_Tabs_content" style="animation-duration:0s"><div class="vocs_CodeBlock"><div class="vocs_CodeTitle">input</div><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" data-title="input" data-lang="tsx" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { styled } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;next-yak&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Button</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> styled.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">button</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">  font-size: 2rem;</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">  font-weight: bold;</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">  color: blue;</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">  &amp;:hover {</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">    color: red;</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">  }</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span></code></pre></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:R4dr:-trigger-output" hidden="" id="radix-:R4dr:-content-output" tabindex="0" data-shiki="true" class="vocs_Tabs_content"></div></div>
<p class="vocs_Paragraph">The dynamic parts are preserved and apply the classes or CSS variables at runtime. There are two different types
of dynamic parts: The first type is the dynamic CSS property value (color in the following example) and the second type is the dynamic CSS property itself (background in the following example).</p>
<p class="vocs_Paragraph">The property value is transformed into a CSS variable and set on the element itself directly based on the functions return value.</p>
<p class="vocs_Paragraph">The property itself is transformed into a class name that is referenced during runtime when the function returns them.</p>
<div dir="ltr" data-orientation="horizontal" class="vocs_CodeGroup vocs_Tabs"><div role="tablist" aria-orientation="horizontal" aria-label="Code group" class="vocs_Tabs_list" tabindex="-1" data-orientation="horizontal" style="outline:none"><button type="button" role="tab" aria-selected="true" aria-controls="radix-:R5dr:-content-input" data-state="active" id="radix-:R5dr:-trigger-input" class="vocs_Tabs_trigger" tabindex="-1" data-orientation="horizontal" data-radix-collection-item="">input</button><button type="button" role="tab" aria-selected="false" aria-controls="radix-:R5dr:-content-output" data-state="inactive" id="radix-:R5dr:-trigger-output" class="vocs_Tabs_trigger" tabindex="-1" data-orientation="horizontal" data-radix-collection-item="">output</button></div><div data-state="active" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:R5dr:-trigger-input" id="radix-:R5dr:-content-input" tabindex="0" data-shiki="true" class="vocs_Tabs_content" style="animation-duration:0s"><div class="vocs_CodeBlock"><div class="vocs_CodeTitle">input</div><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" data-title="input" data-lang="tsx" class="shiki shiki-themes github-light github-dark-dimmed has-focused vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { styled, css } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;next-yak&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Button</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> styled.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">button</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">	font-size: 2rem;</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">	font-weight: bold;</span></span>
<span class="line focused vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">	color: ${</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">props</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> props</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">$primary</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> ?</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;white&quot;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> :</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;blue&quot;};</span></span>
<span class="line focused vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">	${</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">props</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> props</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">$primary</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> ?</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> css</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`background: black;`</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> :</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> css</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`background: white;`}</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">    &amp;:hover {</span></span>
<span class="line focused vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">		color: ${</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">props</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> props</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">$primary</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> ?</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;red&quot;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> :</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;blue&quot;};</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span></code></pre></div></div></div><div data-state="inactive" data-orientation="horizontal" role="tabpanel" aria-labelledby="radix-:R5dr:-trigger-output" hidden="" id="radix-:R5dr:-content-output" tabindex="0" data-shiki="true" class="vocs_Tabs_content"></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="the-second-loader-css-loaderts" class="vocs_Heading_slugTarget"></div>The second loader <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/jantimon/next-yak/blob/main/packages/next-yak/loaders/ts-post-loader.ts" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">(css-loader.ts)</a><a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#the-second-loader-css-loaderts"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">The second loader takes the output of the first loader and resolves the cross module dependencies. The result is valid CSS that will be written to the context.</p>
<h4 class="vocs_H4 vocs_Heading"><div id="resolve-cross-module-dependencies" class="vocs_Heading_slugTarget"></div>Resolve cross module dependencies<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#resolve-cross-module-dependencies"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h4>
<p class="vocs_Paragraph">To resolve cross module dependencies, the first loader generates a unique string to signal the second loader that this is a dependency with a specific name. The second loader then reads the generated CSS from the first loader and resolves the dependencies.
Once the final css is generated the loader hands it over as a CSS module file so it can be processed by Next.js like a normal CSS module file.</p>
<h2 class="vocs_H2 vocs_Heading"><div id="the-runtime-part" class="vocs_Heading_slugTarget"></div>The runtime part<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#the-runtime-part"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">The runtime part is responsible for merging styles and props. It&#x27;s a simple function that takes in the styles and the props and returns the merged styles.</p>
<p class="vocs_Paragraph">See: <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/jantimon/next-yak/blob/main/packages/next-yak/runtime/styled.tsx" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Styled function</a></p>
<p class="vocs_Paragraph">A lot of this code is types and comments to indicate why certain things are done. The actual runtime code is very small.</p>
<h2 class="vocs_H2 vocs_Heading"><div id="context" class="vocs_Heading_slugTarget"></div>Context<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/how-does-it-work#context"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">The yak theme context allows you to configure the theme of your yak application. It works for react-server components
and normal react components.</p>
<p class="vocs_Paragraph">The first part of the puzzle is to export two different modules for the server and the client.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;./context&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">	&quot;react-server&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">		&quot;import&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;./dist/context/index.server.js&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">		&quot;require&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;./dist/context/index.server.cjs&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	},</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">	&quot;default&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: {</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">		&quot;import&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;./dist/context/index.js&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">		&quot;require&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;./dist/context/index.cjs&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">For the client components, we use the default context from react.</p>
<div class="vocs_CodeBlock"><div class="vocs_CodeTitle"><div aria-label="File" class="vocs_Icon" role="img" style="margin-top:1px;--vocs_Icon_size:14px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94 99" fill="none"><title>File</title><rect width="77px" height="89px" x="8px" y="3px" stroke="currentColor" stroke-width="6px" rx="7px"></rect><path stroke="currentColor" stroke-linecap="round" stroke-width="6px" d="M25 22h43M25 35h43M25 48h22"></path></svg></div>client: index.tsx</div><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" data-title="client: index.tsx" data-lang="tsx" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;use client&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">//</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// This file is the client component (browser &amp; ssr) version of index.server.tsx</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">//</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> React, { ReactNode, createContext, useContext } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;react&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> interface</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> YakTheme</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * The yak theme context</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">@see</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> https://github.com/jantimon/next-yak/blob/main/packages/next-yak/runtime/context/README.md</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> YakContext</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> createContext</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&lt;</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">YakTheme</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;({});</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * Returns the current yak theme context</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> *</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">@see</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> https://github.com/jantimon/next-yak/blob/main/packages/next-yak/runtime/context/README.md</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useTheme</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ()</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> YakTheme</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useContext</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(YakContext);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">/**</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * Yak theme context provider</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> *</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> * </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">@see</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> https://github.com/jantimon/next-yak/blob/main/packages/next-yak/runtime/context/README.md</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> */</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> YakThemeProvider</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  children,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  theme </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {},</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">  children</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> ReactNode</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">  theme</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">?:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> YakTheme</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> &lt;</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">YakContext.Provider</span><span style="color:#6F42C1;--shiki-dark:#6CB6FF" class="vocs_Span"> value</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">{</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">theme</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">{</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">children</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&lt;/</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">YakContext.Provider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;;</span></span></code></pre></div></div>
<p class="vocs_Paragraph">For the server components, we use a module that exports exactly the same API as the one for client components, but with a different implementation where we use the <code class="vocs_Code">cache</code> function from react to cache the result of the context.</p>
<div class="vocs_CodeBlock"><div class="vocs_CodeTitle"><div aria-label="File" class="vocs_Icon" role="img" style="margin-top:1px;--vocs_Icon_size:14px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94 99" fill="none"><title>File</title><rect width="77px" height="89px" x="8px" y="3px" stroke="currentColor" stroke-width="6px" rx="7px"></rect><path stroke="currentColor" stroke-linecap="round" stroke-width="6px" d="M25 22h43M25 35h43M25 48h22"></path></svg></div>server: index.server.tsx</div><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" data-title="server: index.server.tsx" data-lang="tsx" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">//</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// This file is the react-server component version of index.tsx</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">//</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// @ts-ignore - in the current @types/react &quot;cache&quot; is not typed</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> React, { ReactNode, cache } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;react&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { YakThemeProvider </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">as</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> YakThemeClientProvider } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;./index.js&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// the following import might be changed by</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// the user config in withYak to point to their own</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// context</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { getYakThemeContext } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;next-yak/context/baseContext&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> useTheme</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> cache</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> getYakThemeContext</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">());</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> YakThemeProvider</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ({ </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">children</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> }</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">children</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> ReactNode</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> }) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    &lt;</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">YakThemeClientProvider</span><span style="color:#6F42C1;--shiki-dark:#6CB6FF" class="vocs_Span"> theme</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">{</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">useTheme</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">      {</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">children</span><span style="color:#24292E;--shiki-dark:#F47067" class="vocs_Span">}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    &lt;/</span><span style="color:#005CC5;--shiki-dark:#8DDB8C" class="vocs_Span">YakThemeClientProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">};</span></span></code></pre></div></div>
<p class="vocs_Paragraph">The <code class="vocs_Code">getYakThemeContext</code> function is imported from the user&#x27;s <code class="vocs_Code">yak.context.ts</code> file. This file is a regular typescript file that exports a function that returns the theme context. You can use every api that works with server components like <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://nextjs.org/docs/app/api-reference/functions/headers" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">headers</a> or <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://nextjs.org/docs/app/api-reference/functions/cookies" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">cookies</a> and use them
to determine your values for the theme context.</p>
<div class="vocs_CodeBlock"><div class="vocs_CodeTitle"><div aria-label="File" class="vocs_Icon" role="img" style="margin-top:1px;--vocs_Icon_size:14px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94 99" fill="none"><title>File</title><rect width="77px" height="89px" x="8px" y="3px" stroke="currentColor" stroke-width="6px" rx="7px"></rect><path stroke="currentColor" stroke-linecap="round" stroke-width="6px" d="M25 22h43M25 35h43M25 48h22"></path></svg></div>yak.context.ts</div><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" data-title="yak.context.ts" data-lang="tsx" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { cookies } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;next/headers&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { cache } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;react&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> hasHighContrast</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> cache</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> cookieStore</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> cookies</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> cookieStore.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">get</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;highContrast&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)?.value </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;true&quot;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">});</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> getYakThemeContext</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        highContrast: </span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">hasHighContrast</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">declare</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> module</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot;next-yak&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> interface</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> YakTheme</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> extends</span><span style="color:#6F42C1;--shiki-dark:#6CB6FF" class="vocs_Span"> ReturnType</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&lt;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">typeof</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> getYakThemeContext&gt; { }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">The second part of the puzzle is that the <code class="vocs_Code">withYak</code> function changes to what file webpack resolves the context so that
it points to the individual <code class="vocs_Code">yak.context.ts</code> file in the root directory.</p>
<div class="vocs_CodeBlock"><div class="vocs_CodeTitle"><div aria-label="File" class="vocs_Icon" role="img" style="margin-top:1px;--vocs_Icon_size:14px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 94 99" fill="none"><title>File</title><rect width="77px" height="89px" x="8px" y="3px" stroke="currentColor" stroke-width="6px" rx="7px"></rect><path stroke="currentColor" stroke-linecap="round" stroke-width="6px" d="M25 22h43M25 35h43M25 48h22"></path></svg></div>withYak/index.ts</div><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" data-title="withYak/index.ts" data-lang="ts" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// With the following alias the internal next-yak code </span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// is able to import a context which works for server components</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> yakContext</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> resolveYakContext</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(yakOptions.contextPath, webpackConfig.context);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (yakContext) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	webpackConfig.resolve.alias[</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;next-yak/context/baseContext&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">] </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> yakContext;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div></article><footer class="vocs_Footer"><div class="vocs_Footer_container"></div></footer></div><div data-bottom-observer="true"></div></div></div>
  </body>
</html>
